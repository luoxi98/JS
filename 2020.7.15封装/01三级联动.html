<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form action="">
        <select name="pro" id="pro"></select>
        <select name="city" id="city"></select>
        <select name="area" id="area"></select>
    </form>
    <script src="area.js"></script>
    <script>
        var data = area;
        var pro = document.querySelector('#pro');
        var city = document.querySelector('#city');
        var Aera = document.querySelector('#area');

        //1:初始化省 遍历data 获取key 添加到 pro中
        (function () {
            for (var x in data) {  //循环遍历出所有的省份 将他添加到到pro中
                // console.log(x)
                var option = document.createElement('option');
                option.innerHTML = x;
                option.value = x;
                pro.appendChild(option)
            }
        })()

        //1.1 初始化市
        var cityData = data[pro[0].value][0]; //获取所有的市       pro[0].value 河南省
        console.log(cityData);
        (function () {
            for (var x in cityData) {
                console.log(x)
                var option = document.createElement('option');
                option.innerHTML = x;
                option.value = x;
                city.appendChild(option)
            }
        })();

        //1.2初始化区

        (function () {
            var areaData = cityData[city[0].value]; //获取所有的区
            console.log(areaData)
            for (var i = 0; i < areaData.length; i++) {
                areaData[i]
                for (var x in areaData[i]) {
                    var option = document.createElement('option');
                    option.innerHTML = x;
                    option.value = x;
                    Aera.appendChild(option)

                }
            }
        })();



        //2 当选择省份发生变化时
        pro.onchange = function(e){
            //如何获取用户选中了哪一个option
            // select.selectIndex 返回选中索引值
            pro.selectedIndex;
            console.log(pro[pro.selectedIndex].value)
           var cityIndex = pro[pro.selectedIndex].value;  //拿到的是哪个省份
           cityData = data[cityIndex][0];   //拿到的省份的市
           console.log(cityData)
         
        }
    </script>
</body>

</html>